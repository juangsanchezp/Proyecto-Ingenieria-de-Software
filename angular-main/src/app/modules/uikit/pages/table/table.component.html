<div class="max-w-2xl mx-auto mt-10 p-6 bg-white dark:bg-card rounded-lg shadow-md">
  <h2 class="text-2xl font-semibold text-foreground mb-6 text-center">
    Registrar nuevo producto
  </h2>

  <form (ngSubmit)="agregarProducto()" #formulario="ngForm">
    <!-- Nombre -->
    <div class="mb-4">
      <label for="nombre" class="block mb-1 text-sm text-muted-foreground font-medium">Nombre del producto</label>
      <input
        id="nombre"
        name="nombre"
        [(ngModel)]="nuevoProducto.nombre"
        type="text"
        class="w-full rounded-md border border-muted bg-background px-4 py-2 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"
        placeholder="Ej. Camisa Blanca"
        required
      />
    </div>

    <!-- Categoría -->
    <div class="mb-4">
      <label for="categoria" class="block mb-1 text-sm text-muted-foreground font-medium">Categoría</label>
      <select
        id="categoria"
        name="categoria"
        [(ngModel)]="nuevoProducto.categoria"
        class="w-full rounded-md border border-muted bg-background px-4 py-2 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"
        required
      >
        <option value="">Selecciona una categoría</option>
        <option value="Camisa">Camisa</option>
        <option value="Pantalón">Pantalón</option>
        <option value="Vestido">Vestido</option>
        <option value="Chaqueta">Chaqueta</option>
      </select>
    </div>

    <!-- Talla -->
    <div class="mb-4">
      <label for="talla" class="block mb-1 text-sm text-muted-foreground font-medium">Talla</label>
      <select
        id="talla"
        name="talla"
        [(ngModel)]="nuevoProducto.talla"
        class="w-full rounded-md border border-muted bg-background px-4 py-2 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"
        required
      >
        <option value="">Selecciona una talla</option>
        <option value="XS">XS</option>
        <option value="S">S</option>
        <option value="M">M</option>
        <option value="L">L</option>
        <option value="XL">XL</option>
      </select>
    </div>

    <!-- Precio -->
    <div class="mb-4">
      <label for="precio" class="block mb-1 text-sm text-muted-foreground font-medium">Precio ($)</label>
      <input
        id="precio"
        name="precio"
        [(ngModel)]="nuevoProducto.precio"
        type="number"
        class="w-full rounded-md border border-muted bg-background px-4 py-2 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"
        placeholder="Ej. 39.99"
        required
      />
    </div>

    <!-- Stock -->
    <div class="mb-6">
      <label for="stock" class="block mb-1 text-sm text-muted-foreground font-medium">Stock disponible</label>
      <input
        id="stock"
        name="stock"
        [(ngModel)]="nuevoProducto.stock"
        type="number"
        class="w-full rounded-md border border-muted bg-background px-4 py-2 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"
        placeholder="Ej. 15"
        required
      />
    </div>

<!-- Imagen -->
<div class="mb-6">
  <label for="imagen" class="block mb-1 text-sm text-muted-foreground font-medium">Imagen del producto</label>
  <input
    id="imagen"
    name="imagen"
    type="file"
    accept="image/*"
    (change)="onImagenSeleccionada($event)"
    class="w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:bg-primary file:text-white hover:file:bg-primary/90"
  />
</div>

<!-- Vista previa -->
@if (imagenPreview) {
  <div class="mb-4">
    <img [src]="imagenPreview" alt="Vista previa" class="w-32 h-32 object-cover rounded-md border" />
  </div>
}




    <!-- Botón -->
    <div class="text-right">
      <button
        type="submit"
        class="bg-primary text-white px-6 py-2 rounded-md text-sm font-semibold hover:bg-primary/90 transition-colors">
        Guardar producto
      </button>
    </div>
  </form>
</div>




<div class="border-muted/20 bg-background flex min-w-full flex-col rounded-xl border p-2">
  
  <!-- Filtro -->
  <div class="px-5 pt-4 pb-2 text-sm text-muted-foreground">
    <label for="filtro" class="block mb-1 text-sm font-medium">Buscar producto</label>
   <div>
    <input
      id="filtro"
      type="text"
      [(ngModel)]="filtro"
      name="filtro"
      placeholder="Buscar por nombre o ID..."
      class="w-64 rounded-md border border-muted bg-background px-4 py-1.5 text-sm focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary"
    />
  </div>

  <div
    class="scrollbar-thumb-rounded scrollbar-track-rounded scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted grow overflow-x-auto px-5">
    <table
      class="text-muted-foreground table w-full table-auto border-collapse border-0 text-left align-middle leading-5">
      <thead class="border-muted/20 text-muted-foreground border text-xs">
        <tr>
          <th class="py-2">#</th>
          <th class="py-2">Nombre</th>
          <th class="py-2">Categoría</th>
          <th class="py-2">Talla</th>
          <th class="py-2">Precio</th>
          <th class="py-2">Stock</th>
          <th class="py-2 text-right">Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (producto of filteredProductos(); track producto.id) {
          <tr class="hover:bg-card/50">
            <td class="py-2">{{ producto.id }}</td>
            <td class="py-2 font-medium">{{ producto.nombre }}</td>
            <td class="py-2">{{ producto.categoria }}</td>
            <td class="py-2">{{ producto.talla }}</td>
            <td class="py-2">${{ producto.precio }}</td>
            <td class="py-2">{{ producto.stock }}</td>
            <td class="py-2 text-right space-x-2">
              <button
                  class="text-primary text-xs hover:underline"
                  (click)="editarProducto(producto)">
                  Editar
              </button>

              <button
                (click)="eliminarProducto(producto.id)"
                class="text-red-500 text-xs hover:underline">
                Eliminar
              </button>
            </td>
          </tr>
        } @empty {
          <tr>
            <td class="py-4 text-center text-sm" colspan="7">No hay productos registrados</td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="px-5 py-2 text-sm text-muted-foreground text-right">
    Mostrando {{ productos().length }} productos
  </div>
</div>

